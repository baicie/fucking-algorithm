### 常见框架的 Diff 算法

现代的网络站点具有复杂的布局，大量的节点与交互的操作等特征，直接操作DOM的方法不当带来性能的问题不可忽视。虚拟DOM实际上是js对象，可以代表DOM的一部分特征，是DOM的简化抽象版本。通过预先操作虚拟DOM，在某个时机找出和虚拟DOM之间的差异部分并重新渲染，来提升操作真实DOM的性能和效率。

#### vue3中的diff算法

vue3的diff算法是一个双端对比+快速定位+最长递增子序列优化的算法

diff核心逻辑

1. 前后端比较（双指针）

- oldStart vs newStart
- oldEnd vs newEnd
 目标是快速跳过相同的节点，比如列表两端没有变化的部分

2. 处理插入、删除

- 如果新增 插入
- 如果旧多出 删除

3. 中间乱序部分 简历key-index映射

- 用Map存储新节点的key-index，块度定位旧节点在新列表中的位置

4. 旧节点在新列表找不到删除

5. 新旧节点匹配-》patch更新内容

6. 最长递增子序列 优化DOM移动
vue会找出中间乱序部分中，位置没变的子序列，剩下的才做DOM移动操作

- 尽量复用、减少插入/删除/移动
